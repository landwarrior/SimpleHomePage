<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>モンハンワールド武器攻撃力期待値算出</title>
  <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/bootstrap-theme.min.css" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <link href="css/main.css" rel="stylesheet">
  <script src="js/main.js"></script>
  <script>
    (function(i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function() {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date();
      a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-67415165-2', 'auto');
    ga('send', 'pageview');

    $(function() {
      $('#kireaji').change(function() {
        let selected_val = $(this).val();
        switch (selected_val) {
          case '50':
            $('#mihon').css({
              'background-color': 'red'
            });
            break;
          case '75':
            $('#mihon').css({
              'background-color': 'orange'
            });
            break;
          case '100':
            $('#mihon').css({
              'background-color': 'yellow'
            });
            break;
          case '105':
            $('#mihon').css({
              'background-color': 'green'
            });
            break;
          case '125':
            $('#mihon').css({
              'background-color': 'blue'
            });
            break;
          case '132':
            $('#mihon').css({
              'background-color': 'white'
            });
            break;
          case '139':
            $('#mihon').css({
              'background-color': 'purple'
            });
            break;
        }
      });
      $('#damage').on('change', calc);
      $('#kaishin').on('change', calc);
      $('#kireaji').on('change', calc);
      $('#chokaishin').on('change', calc);
    });

    let calc = function() {
      let base = parseInt($('#damage').val());
      let kaishin = parseInt($('#kaishin').val());
      let kireaji = parseInt($('#kireaji').val());
      let chokaishin = parseInt($('#chokaishin').val());
      let damageBase = base * kireaji / 100;
      let special = 0;
      if (kaishin > 100) {
        kaishin = 100;
      }
      if (kaishin > 0) {
        special = damageBase * 100 * chokaishin / 10000;
      } else {
        special = damageBase * 100 * 75 / 10000;
      }
      let result = (damageBase * 100 * (100 - Math.abs(kaishin)) + special * 100 * Math.abs(kaishin)) / 10000;
      $('#kekka').text(result);
    }
  </script>
  <style>
    body {
      padding: 30px;
      text-align: center;
    }

    table {
      margin: 0 auto;
    }

    td:nth-child(1) {
      text-align: right;
    }

    td:nth-child(2) {
      text-align: left;
    }

    article {
      padding: 10px 0;
    }

    #mihon {
      height: 20px;
      padding: 0 10px;
      border: solid 1px #aaaaaa;
      background-color: green;
    }
  </style>
</head>

<body>
  <h1>モンハンワールドの武器の攻撃力の期待値(補正込みでの攻撃力の目安)を算出します</h1>
  <article>
    ノリで作りました。入力した後フォーカスを変える(もう片方をタップしたり)とjavascriptが動いて期待値が表示されます。
  </article>
  <table>
    <tr>
      <td>基本攻撃力：</td>
      <td><input type="text" id="damage" value=""></td>
    </tr>
    <tr>
      <td>会心(%)：</td>
      <td><input type="text" id="kaishin" value=""></td>
    </tr>
    <tr>
      <td>切れ味：</td>
      <td><select id="kireaji">
          <option value="50">赤(0.5)</option>
          <option value="75">橙(0.75)</option>
          <option value="100">黄(1.0)</option>
          <option value="105" selected>緑(1.05)</option>
          <option value="125">青(1.25)</option>
          <option value="132">白(1.32)</option>
          <option value="139">紫(1.39)</option>
        </select>&nbsp;<span id="mihon">&nbsp;</span></td>
    </tr>
    <tr>
      <td>超会心：</td>
      <td>
        <select id="chokaishin">
          <option value="125">なし</option>
          <option value="130">レベル1(1.3倍)</option>
          <option value="135">レベル2(1.35倍)</option>
          <option value="140">レベル3(1.4倍)</option>
        </select>
      </td>
    </tr>
  </table>
  <h2>期待値</h2>
  <h3 id="kekka"></h3>
  <footer class="footer padtop20">
    <p class="cen">&copy; Copyright 2006 - <span id="year"></span> landwarrior All Rights Reserved.</p>
  </footer>
</body>

</html>
